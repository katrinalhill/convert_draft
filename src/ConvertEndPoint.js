

var currency_list_obj = {
  USD: 'US Dollar',
  EUR: 'Euro',
  IQD: 'Iraqi Dinar',
  KRW: 'South Korean Won',
  KWD: 'Kuwaiti Dinar',
  AED: 'United Arab Emirates Dirham',
  AFN: "Afghan afghani",
  ALL: 'Albanian Lek',
  AMD: 'Armenian Dram',
  ANG: 'Netherlands Antillean Guilder',
  AOA: 'Angolan Kwanza',
  ARS: 'Argentine Peso',
  AUD: 'Australian Dollar',
  AWG: 'Aruban Florin',
  AZN: 'Azerbaijani Manat',
  BAM: 'Bosnia-Herzegovina Convertible Mark',
  BBD: 'Barbadian Dollar',
  BDT: 'Bangladeshi Taka',
  BGN: 'Bulgarian Lev',
  BHD: 'Bahraini Dinar',
  BIF: 'Burundian Franc',
  BMD: 'Bermudan Dollar',
  BND: 'Brunei Dollar',
  BOB: 'Bolivian Boliviano',
  BRL: 'Brazilian Real',
  BSD: 'Bahamian Dollar',
  BTC: 'Bitcoin',
  BTN: 'Bhutanese Ngultrum',
  BWP: 'Botswanan Pula',
  BYN: 'Belarusian Ruble',
  BZD: 'Belize Dollar',
  CAD: 'Canadian Dollar',
  CDF: 'Congolese Franc',
  CHF: 'Swiss Franc',
  CLF: 'Chilean Unit of Account',
  CLP: 'Chilean Peso',
  CNH: 'Renminbi (RMB-China)',
  CNY: 'Chinese Yuan',
  COP: 'Colombian Peso',
  CRC: 'Costa Rican ColÃ³n',
  CUC: 'Cuban Convertible Peso',
  CUP: 'Cuban Peso',
  CVE: 'Cape Verdean Escudo',
  CZK: 'Czech Republic Koruna',
  DJF: 'Djiboutian Franc',
  DKK: 'Danish Krone',
  DOP: 'Dominican Peso',
  DZD: 'Algerian Dinar',
  EGP: 'Egyptian Pound',
  ERN: 'Eritrean Nakfa',
  ETB: 'Ethiopian Birr',
  FJD: 'Fijian Dollar',
  FKP: 'Falkland Islands Pound',
  GBP: 'British Pound Sterling',
  GEL: 'Georgian Lari',
  GGP: 'Guernsey Pound',
  GHS: 'Ghanaian Cedi',
  GIP: 'Gibraltar Pound',
  GMD: 'Gambian Dalasi',
  GNF: 'Guinean Franc',
  GTQ: 'Guatemalan Quetzal',
  GYD: 'Guyanaese Dollar',
  HKD: 'Hong Kong Dollar',
  HNL: 'Honduran Lempira',
  HRK: 'Croatian Kuna',
  HTG: 'Haitian Gourde',
  HUF: 'Hungarian Forint',
  IDR: 'Indonesian Rupiah',
  ILS: 'Israeli New Sheqel',
  IMP: 'Manx pound',
  INR: 'Indian Rupee',
  IRR: 'Iranian Rial',
  ISK: 'Icelandic KrÃ³na',
  JEP: 'Jersey pound',
  JMD: 'Jamaican Dollar',
  JOD: 'Jordanian Dinar',
  JPY: 'Japanese Yen',
  KES: 'Kenyan Shilling',
  KGS: 'Kyrgystani Som',
  KHR: 'Cambodian Riel',
  KMF: 'Comorian Franc',
  KPW: 'North Korean Won',
  KYD: 'Cayman Islands Dollar',
  KZT: 'Kazakhstani Tenge',
  LAK: 'Laotian Kip',
  LBP: 'Lebanese Pound',
  LKR: 'Sri Lankan Rupee',
  LRD: 'Liberian Dollar',
  LSL: 'Lesotho Loti',
  LYD: 'Libyan Dinar',
  MAD: 'Moroccan Dirham',
  MDL: 'Moldovan Leu',
  MGA: 'Malagasy Ariary',
  MKD: 'Macedonian Denar',
  MMK: 'Myanmar Kyat',
  MNT: 'Mongolian Tugrik',
  MOP: 'Macanese Pataca',
  MRU: 'Manx pound',
  MUR: 'Mauritian Rupee',
  MVR: 'Maldivian Rufiyaa',
  MWK: 'Malawian Kwacha',
  MXN: 'Mexican Peso',
  MYR: 'Malaysian Ringgit',
  MZN: 'Mozambican metical',
  NAD: 'Namibian Dollar',
  NGN: 'Nigerian Naira',
  NIO: 'Nicaraguan CÃ³rdoba',
  NOK: 'Norwegian Krone',
  NPR: 'Nepalese Rupee',
  NZD: 'New Zealand Dollar',
  OMR: 'Omani Rial',
  PAB: 'Panamanian Balboa',
  PEN: 'Peruvian Nuevo Sol',
  PGK: 'Papua New Guinean Kina',
  PHP: 'Philippine Peso',
  PKR: 'Pakistani Rupee',
  PLN: 'Polish Zloty',
  PYG: 'Paraguayan Guarani',
  QAR: 'Qatari Rial',
  RON: 'Romanian Leu',
  RSD: 'Serbian Dinar',
  RUB: 'Russian Ruble',
  RWF: 'Rwandan Franc',
  SAR: 'Saudi Riyal',
  SBD: 'Solomon Islands Dollar',
  SCR: 'Seychellois Rupee',
  SDG: 'Sudanese Pound',
  SEK: 'Swedish Krona',
  SGD: 'Singapore Dollar',
  SHP: 'St. Helena Pound',
  SLL: 'Sierra Leonean Leone',
  SOS: 'Somali Shilling',
  SRD: 'Surinamese Dollar',
  SSP: 'South Sudanese pound',
  STD: 'São Tomé and Príncipe Dobra',
  STN: 'Sao Tomean Dobra',
  SVC: 'Salvadoran ColÃ³n',
  SYP: 'Syrian Pound',
  SZL: 'Swazi Lilangeni',
  THB: 'Thai Baht',
  TJS: 'Tajikistani Somoni',
  TMT: 'Turkmenistani Manat',
  TND: 'Tunisian Dinar',
  TOP: "Tongan Pa'anga",
  TRY: 'Turkish Lira',
  TTD: 'Trinidad & Tobago Dollar',
  TWD: 'New Taiwan Dollar',
  TZS: 'Tanzanian Shilling',
  UAH: 'Ukrainian Hryvnia',
  UGX: 'Ugandan Shilling',
  UYU: 'Uruguayan Peso',
  UZS: 'Uzbekistan Som',
  VES: 'Venezuelan bolívar',
  VND: 'Vietnamese Dong',
  VUV: 'Vanuatu Vatu',
  WST: 'Samoan Tala',
  XAF: 'CFA Franc BEAC',
  XAG: 'Silver Ounce',
  XAU: 'Troy Ounce Of Gold',
  XCD: 'East Caribbean Dollar',
  XDR: 'Special Drawing Rights',
  XOF: 'CFA Franc BCEAO',
  XPD: 'Palladium Ounce',
  XPF: 'CFP Franc',
  XPT: 'Platinum Ounce',
  YER: 'Yemeni Rial',
  ZAR: 'South African Rand',
  ZMW: 'Zambian Kwacha ',
  ZWL: 'Zimbabwean Dollar',
  BYR: 'Belarusian Ruble',
  BEF: 'Belgian Franc',
  EEK: 'Estonian Kroon',
  DEM: 'German Mark',
  GRD: 'Greek Drachma',
  ITL: 'Italian Lira',
  LVL: 'Latvian Lats',
  LTL: 'Lithuanian Litas',
  MRO: 'Mauritanian Ouguiya',
  MZM: 'Mozambican Metical',
  SKK: 'Slovak Koruna',
  VEF: 'Venezuelan BolÃvar',
  ZMK: 'Zambian Kwacha'
}
///varibles//
let url = `https://api.exchangerate.host/latest`
const form = document.querySelector('.app form');
const ratesByBase = {};

const fromSelect = document.querySelector('[name="from_currency"]');
const toSelect = document.querySelector('[name="to_currency"]');
const fromInput = document.querySelector('[name="from_amount"]');
const toEl = document.querySelector('.to_amount');
const currentRate =document.querySelector('.current_rate');
const to_amount2 =document.querySelector('.to_amount2');
///create drop down menu using currency_list_obj

const countriesCurrencyList= (currency_list_obj) => {
  return Object.entries(currency_list_obj)
  .map(([countryCode, currencyName]) => 
      `<option value="${countryCode}">${countryCode} - ${currencyName}</option>`)
  .join('')

}

//communicate to the htlm
const indexHTML = countriesCurrencyList(currency_list_obj);
fromSelect.innerHTML = indexHTML;
toSelect.innerHTML = indexHTML;



///get data from api



async function fetchRates(base = "USD") {
  const res = await fetch(`${url}?base=${base}`);
  const rates = await res.json();
  console.log(rates)
  return rates;
}
// convert to rates 

async function convert(amount, from, to) {
  // first check if we even have the rates to convert from that currency
  if (!ratesByBase[from]) {
      //console.log(`We do not have the rates ${from} . We cannot convert it ${to}. Please standby while we get it!`);
      const rates = await fetchRates(from);
     // console.log(rates);
      // store them for next time
      ratesByBase[from] = rates;
  }
  const rate = ratesByBase[from].rates[to];
  const convertedAmount = rate * amount;
  currentRate.innerHTML = rate

 //console.log(`${amount} ${from} is ${convertedAmount} in ${to}`);
  return convertedAmount; 
}

const formatCurrency= (amount, currency) =>{
return Intl.NumberFormat({
  style: 'currency',
  currency
}).format(amount);
}


async function handleInput(e) {

const rawAmount = await convert(
  fromInput.value, ///('[name="from_amount"]');
  fromSelect.value, //('[name="from_currency"]'
  toSelect.value ///[name="to_currency"]');

);

toEl.textContent = formatCurrency(rawAmount, toSelect.value) 
}

// const baseRates= ()=>{
//     fetch(`https://api.exchangerate.host/latest/?base=USD`)
//     .then(resp => resp.json())
//     .then(data =>{
//         console.log(data.rates)
//     .then (document.querySelector('.current_rate'))
//     })
// }
// baseRates()

// const changeKeys = (a,b)=>{
//   const returnedTarget = Object.assign(rates, currency_list_obj);
//   console.log(returnedTarget)

// }

// changeKeys()

//  var currency_list_obj = {
//   "USD": "US Dollar",
//   "ALL": "Albanian Lek",
//   "DZD": "Algerian Dinar",
//   "AOA": "Angolan Kwanza",
//   "ARS": "Argentine Peso",
//   "AMD": "Armenian Dram",
//   "AWG": "Aruban Florin",
//   "AUD": "Australian Dollar",
//   "AZN": "Azerbaijani Manat",
//   "BSD": "Bahamian Dollar",
//   "BHD": "Bahraini Dinar",
//   "BDT": "Bangladeshi Taka",
//   "BBD": "Barbadian Dollar",
//   "BYR": "Belarusian Ruble",
//   "BEF": "Belgian Franc",
//   "BZD": "Belize Dollar",
//   "BMD": "Bermudan Dollar",
//   "BTN": "Bhutanese Ngultrum",
//   "BTC": "Bitcoin",
//   "BOB": "Bolivian Boliviano",
//   "BAM": "Bosnia-Herzegovina Convertible Mark",
//   "BWP": "Botswanan Pula",
//   "BRL": "Brazilian Real",
//   "GBP": "British Pound Sterling",
//   "BND": "Brunei Dollar",
//   "BGN": "Bulgarian Lev",
//   "BIF": "Burundian Franc",
//   "KHR": "Cambodian Riel",
//   "CAD": "Canadian Dollar",
//   "CVE": "Cape Verdean Escudo",
//   "KYD": "Cayman Islands Dollar",
//   "XOF": "CFA Franc BCEAO",
//   "XAF": "CFA Franc BEAC",
//   "XPF": "CFP Franc",
//   "CLP": "Chilean Peso",
//   "CNY": "Chinese Yuan",
//   "COP": "Colombian Peso",
//   "KMF": "Comorian Franc",
//   "CDF": "Congolese Franc",
//   "CRC": "Costa Rican ColÃ³n",
//   "HRK": "Croatian Kuna",
//   "CUC": "Cuban Convertible Peso",
//   "CZK": "Czech Republic Koruna",
//   "DKK": "Danish Krone",
//   "DJF": "Djiboutian Franc",
//   "DOP": "Dominican Peso",
//   "XCD": "East Caribbean Dollar",
//   "EGP": "Egyptian Pound",
//   "ERN": "Eritrean Nakfa",
//   "EEK": "Estonian Kroon",
//   "ETB": "Ethiopian Birr",
//   "EUR": "Euro",
//   "FKP": "Falkland Islands Pound",
//   "FJD": "Fijian Dollar",
//   "GMD": "Gambian Dalasi",
//   "GEL": "Georgian Lari",
//   "DEM": "German Mark",
//   "GHS": "Ghanaian Cedi",
//   "GIP": "Gibraltar Pound",
//   "GRD": "Greek Drachma",
//   "GTQ": "Guatemalan Quetzal",
//   "GNF": "Guinean Franc",
//   "GYD": "Guyanaese Dollar",
//   "HTG": "Haitian Gourde",
//   "HNL": "Honduran Lempira",
//   "HKD": "Hong Kong Dollar",
//   "HUF": "Hungarian Forint",
//   "ISK": "Icelandic KrÃ³na",
//   "INR": "Indian Rupee",
//   "IDR": "Indonesian Rupiah",
//   "IRR": "Iranian Rial",
//   "IQD": "Iraqi Dinar",
//   "ILS": "Israeli New Sheqel",
//   "ITL": "Italian Lira",
//   "JMD": "Jamaican Dollar",
//   "JPY": "Japanese Yen",
//   "JOD": "Jordanian Dinar",
//   "KZT": "Kazakhstani Tenge",
//   "KES": "Kenyan Shilling",
//   "KWD": "Kuwaiti Dinar",
//   "KGS": "Kyrgystani Som",
//   "LAK": "Laotian Kip",
//   "LVL": "Latvian Lats",
//   "LBP": "Lebanese Pound",
//   "LSL": "Lesotho Loti",
//   "LRD": "Liberian Dollar",
//   "LYD": "Libyan Dinar",
//   "LTL": "Lithuanian Litas",
//   "MOP": "Macanese Pataca",
//   "MKD": "Macedonian Denar",
//   "MGA": "Malagasy Ariary",
//   "MWK": "Malawian Kwacha",
//   "MYR": "Malaysian Ringgit",
//   "MVR": "Maldivian Rufiyaa",
//   "MRO": "Mauritanian Ouguiya",
//   "MUR": "Mauritian Rupee",
//   "MXN": "Mexican Peso",
//   "MDL": "Moldovan Leu",
//   "MNT": "Mongolian Tugrik",
//   "MAD": "Moroccan Dirham",
//   "MZM": "Mozambican Metical",
//   "MMK": "Myanmar Kyat",
//   "NAD": "Namibian Dollar",
//   "NPR": "Nepalese Rupee",
//   "ANG": "Netherlands Antillean Guilder",
//   "TWD": "New Taiwan Dollar",
//   "NZD": "New Zealand Dollar",
//   "NIO": "Nicaraguan CÃ³rdoba",
//   "NGN": "Nigerian Naira",
//   "KPW": "North Korean Won",
//   "NOK": "Norwegian Krone",
//   "OMR": "Omani Rial",
//   "PKR": "Pakistani Rupee",
//   "PAB": "Panamanian Balboa",
//   "PGK": "Papua New Guinean Kina",
//   "PYG": "Paraguayan Guarani",
//   "PEN": "Peruvian Nuevo Sol",
//   "PHP": "Philippine Peso",
//   "PLN": "Polish Zloty",
//   "QAR": "Qatari Rial",
//   "RON": "Romanian Leu",
//   "RUB": "Russian Ruble",
//   "RWF": "Rwandan Franc",
//   "SVC": "Salvadoran ColÃ³n",
//   "WST": "Samoan Tala",
//   "SAR": "Saudi Riyal",
//   "RSD": "Serbian Dinar",
//   "SCR": "Seychellois Rupee",
//   "SLL": "Sierra Leonean Leone",
//   "SGD": "Singapore Dollar",
//   "SKK": "Slovak Koruna",
//   "SBD": "Solomon Islands Dollar",
//   "SOS": "Somali Shilling",
//   "ZAR": "South African Rand",
//   "KRW": "South Korean Won",
//   "XDR": "Special Drawing Rights",
//   "LKR": "Sri Lankan Rupee",
//   "SHP": "St. Helena Pound",
//   "SDG": "Sudanese Pound",
//   "SRD": "Surinamese Dollar",
//   "SZL": "Swazi Lilangeni",
//   "SEK": "Swedish Krona",
//   "CHF": "Swiss Franc",
//   "SYP": "Syrian Pound",
//   "STD": "São Tomé and Príncipe Dobra",
//   "TJS": "Tajikistani Somoni",
//   "TZS": "Tanzanian Shilling",
//   "THB": "Thai Baht",
//   "TOP": "Tongan Pa'anga",
//   "TTD": "Trinidad & Tobago Dollar",
//   "TND": "Tunisian Dinar",
//   "TRY": "Turkish Lira",
//   "TMT": "Turkmenistani Manat",
//   "UGX": "Ugandan Shilling",
//   "UAH": "Ukrainian Hryvnia",
//   "AED": "United Arab Emirates Dirham",
//   "UYU": "Uruguayan Peso",
//   "UZS": "Uzbekistan Som",
//   "VUV": "Vanuatu Vatu",
//   "VEF": "Venezuelan BolÃvar",
//   "VND": "Vietnamese Dong",
//   "YER": "Yemeni Rial",
//   "ZMK": "Zambian Kwacha"
// };